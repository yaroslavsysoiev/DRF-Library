# üìö DRF Library Management System

–°—É—á–∞—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é, –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞ Django REST Framework –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é Stripe –¥–ª—è –ø–ª–∞—Ç–µ–∂—ñ–≤ —Ç–∞ Telegram –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å.

## üöÄ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### Core Functionality
- **üë• User Management**: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—è–º–∏
- **üìñ Book Management**: CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–Ω–∏–≥ –∑ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è–º —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è
- **üìö Borrowing System**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–∏—á–∞–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∫–Ω–∏–≥
- **üí≥ Payment Processing**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑—ñ Stripe –¥–ª—è –ø–ª–∞—Ç–µ–∂—ñ–≤ —Ç–∞ —à—Ç—Ä–∞—Ñ—ñ–≤
- **üì± Notifications**: Telegram —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- **üìä Analytics**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞
- **‚è∞ Scheduled Tasks**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —à—Ç—Ä–∞—Ñ—ñ–≤ —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å

### Technical Features
- **üîê JWT Authentication**: –ë–µ–∑–ø–µ—á–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- **üõ°Ô∏è Permissions**: –†–æ–∑—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—ñ–≤
- **üîç Filtering & Search**: –ü—Ä–æ—Å—É–Ω—É—Ç–∏–π –ø–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
- **üìÑ Pagination**: –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö
- **üê≥ Docker Support**: –ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ Docker
- **üìà Monitoring**: Health checks —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- **üß™ Testing**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Backend
- **Django 4.2.7**: –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Django REST Framework 3.14.0**: API —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL**: –û—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Redis**: –ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ —á–µ—Ä–≥–∏ –∑–∞–≤–¥–∞–Ω—å
- **Django-Q**: –ü–ª–∞–Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### External Integrations
- **Stripe**: –ü–ª–∞—Ç–µ–∂—ñ —Ç–∞ —à—Ç—Ä–∞—Ñ–∏
- **Telegram Bot API**: –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- **JWT**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### Development & Testing
- **Pytest**: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **Factory Boy**: –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
- **Coverage**: –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏
- **Docker**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è
- **Nginx**: Reverse proxy

## üìã –í–∏–º–æ–≥–∏

- Python 3.11+
- PostgreSQL 15+
- Redis 7+
- Docker & Docker Compose (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <repository-url>
cd DRF-Library
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\Scripts\activate  # Windows

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
# –°–∫–æ–ø—ñ—é–π—Ç–µ .env.sample
cp .env.sample .env

# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

### 4. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
```bash
# –ú—ñ–≥—Ä–∞—Ü—ñ—ó
python manage.py migrate

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
python manage.py createsuperuser
```

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python manage.py runserver
```

## üê≥ Docker Deployment

### Development
```bash
docker-compose up --build
```

### Production
```bash
docker-compose -f docker-compose.prod.yml up -d --build
```

## üìö API Documentation

### Swagger UI
- **URL**: `http://localhost:8000/api/docs/`
- **Description**: –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

### ReDoc
- **URL**: `http://localhost:8000/api/redoc/`
- **Description**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JWT (JSON Web Tokens) –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
```bash
curl -X POST http://localhost:8000/api/users/token/ \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "password"}'
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
```bash
curl -X GET http://localhost:8000/api/books/ \
  -H "Authorization: Authorize <your_token>"
```

## üìä –û—Å–Ω–æ–≤–Ω—ñ Endpoints

### Users
- `POST /api/users/register/` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `POST /api/users/token/` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω—É
- `POST /api/users/token/refresh/` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
- `GET /api/users/profile/` - –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### Books
- `GET /api/books/` - –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
- `GET /api/books/{id}/` - –î–µ—Ç–∞–ª—ñ –∫–Ω–∏–≥–∏
- `POST /api/books/` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ (admin)
- `PUT /api/books/{id}/` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ (admin)
- `DELETE /api/books/{id}/` - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ (admin)

### Borrowings
- `GET /api/borrowings/` - –°–ø–∏—Å–æ–∫ –ø–æ–∑–∏—á–µ–Ω—å
- `POST /api/borrowings/` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–∑–∏—á–∞–Ω–Ω—è
- `GET /api/borrowings/{id}/` - –î–µ—Ç–∞–ª—ñ –ø–æ–∑–∏—á–∞–Ω–Ω—è
- `PATCH /api/borrowings/{id}/return/` - –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

### Payments
- `GET /api/payments/` - –°–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂—ñ–≤
- `POST /api/payments/` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É
- `GET /api/payments/{id}/` - –î–µ—Ç–∞–ª—ñ –ø–ª–∞—Ç–µ–∂—É
- `POST /api/payments/{id}/refund/` - –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É (admin)

### Analytics
- `GET /api/analytics/revenue/` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥—ñ–≤
- `GET /api/analytics/borrowings/` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø–æ–∑–∏—á–µ–Ω—å
- `GET /api/analytics/books/` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∫–Ω–∏–≥
- `GET /api/analytics/users/` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## üîß Management Commands

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–ª–∞–Ω–æ–≤–∏—Ö –∑–∞–≤–¥–∞–Ω—å
```bash
python manage.py setup_tasks
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
```bash
python manage.py run_task daily_summary
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
python -m pytest

# –ó–∞–ø—É—Å–∫ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º
python -m pytest --cov=.

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
python -m pytest tests/test_users.py::TestUserRegistration::test_user_registration_success
```

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### Health Check
```bash
curl http://localhost:8000/health/
```

### –õ–æ–≥–∏
```bash
# Django –ª–æ–≥–∏
tail -f logs/django.log

# Docker –ª–æ–≥–∏
docker-compose logs -f web
```

## üîí –ë–µ–∑–ø–µ–∫–∞

### Rate Limiting
- API endpoints: 10 requests/second
- Login endpoints: 5 requests/minute

### Permissions
- **Public**: –ü–µ—Ä–µ–≥–ª—è–¥ –∫–Ω–∏–≥
- **Authenticated**: –ü–æ–∑–∏—á–∞–Ω–Ω—è –∫–Ω–∏–≥, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª–µ–º
- **Admin**: –ü–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π

### Environment Variables
–û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
```bash
SECRET_KEY=your-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
FINE_MULTIPLIER=2.0
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏
- **Unit Tests**: –ú–æ–¥–µ–ª—ñ, —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∏, permissions
- **Integration Tests**: API endpoints
- **Coverage Target**: 60%+

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
```bash
# –í—Å—ñ —Ç–µ—Å—Ç–∏
python -m pytest

# –ó –ø–æ–∫—Ä–∏—Ç—Ç—è–º
python -m pytest --cov=. --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –º–∞—Ä–∫–µ—Ä
python -m pytest -m "api"
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
DRF-Library/
‚îú‚îÄ‚îÄ library_service/          # –û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Django
‚îú‚îÄ‚îÄ users/                   # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
‚îú‚îÄ‚îÄ books/                   # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏
‚îú‚îÄ‚îÄ borrowings/              # –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–∏—á–∞–Ω—å
‚îú‚îÄ‚îÄ payments/                # –ü–ª–∞—Ç–µ–∂—ñ —Ç–∞ —à—Ç—Ä–∞—Ñ–∏
‚îú‚îÄ‚îÄ notifications/           # Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ analytics/               # –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –∑–≤—ñ—Ç–∏
‚îú‚îÄ‚îÄ tasks/                   # –ü–ª–∞–Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ nginx/                   # Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker –∫–æ–º–ø–æ–∑–∏—Ü—ñ—è
‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ requirements.txt         # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

## ü§ù Contributing

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∑–º—ñ–Ω (`git commit -m 'Add amazing feature'`)
4. Push –¥–æ branch (`git push origin feature/amazing-feature`)
5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Pull Request

## üìù License

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–∏–π –ø—ñ–¥ MIT License - –¥–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìû Support

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [Issues](https://github.com/your-repo/issues)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–µ Issue –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –æ–ø–∏—Å–æ–º –ø—Ä–æ–±–ª–µ–º–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs`

## üéØ Roadmap

### Planned Features
- [ ] Email —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- [ ] SMS —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- [ ] –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
- [ ] Machine Learning –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- [ ] Blockchain –¥–ª—è –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

### Performance Improvements
- [ ] Redis –∫–µ—à—É–≤–∞–Ω–Ω—è
- [ ] Database –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è
- [ ] CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- [ ] Load balancing

---

**–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Django REST Framework**
